This readme is intended for plume-lib developers.
The main plume-lib documentation is in file README.html .


--Making a release--

To make a plume-lib release and upload it to Google Code:

1. Update changelog.txt.  To help writing the text, run a command such as:

    hg log

to view the changes since the last release, or 

    hg diff -r v1.0.1

to see the changes.  You can search for "--- /dev/null" to find new files;
Ensure that the main documentation at README.html documents any new files.

2. Commit and push any changes in your copy of the plume-lib repository.

3. Run the make-plume-release script located in plume-lib/bin:

    cd plume-lib
    bin/make-plume-release x.y.z

where x.y.z is the intended new version number of the release.

The script requires that $JAVAC or 'javac' point to the JSR 308 compiler.
If this is the case, then the release is built and the test cases are run.  The
release should be Java 5 compatible.

You will be asked if you want artifacts generated by this release to be uploaded
to Google Code automatically.  If so, you will be prompted to enter your Google
Code username and password.  This step requires that googlecode_upload.py
(http://support.googlecode.com/svn/trunk/scripts/googlecode_upload.py)
be in your $PATH.

4. Check that the artifacts were successfully uploaded to Google Code, or upload
them manually if not using googlecode_upload.py (use labels "Type-Source",
"OpSys-All", and "Featured").  For the previous release downloads, change
the "Featured" label to "Deprecated".

5. Update the web version of the Javadoc.  On a machine connected to the UW
CSE file system:

    cd $pl/java
    hg fetch
    make javadoc-publish

This step can be done even without making a new release.

6. Push the new Mercurial tag created by the script to the repository:

    hg push
